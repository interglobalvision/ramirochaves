{"version":3,"sources":["webpack:///webpack/bootstrap 0f6103dc464c39e89e64","webpack:///./src/js/main.js","webpack:///./node_modules/lazysizes/lazysizes.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/Scratch.js","webpack:///./node_modules/@zouloux/shake/shake.js","webpack:///./src/styl/site.styl"],"names":["Site","mobileThreshold","$body","$","$cursorBrush","$cursorLoading","updateCursorPosition","bind","window","resize","onResize","document","ready","onReady","init","bindMouseMove","currentId","WP","removeClass","history","replaceState","postId","location","href","bindMenuTriggers","bindProjectTriggers","bindBackButton","each","string","html","replace","addEventListener","hover","addClass","e","$cursor","hasClass","width","height","left","pageX","top","pageY","css","on","event","target","parent","pushHomeState","closeProject","pushState","homeId","siteUrl","preventDefault","attr","loadProjectContent","url","restEndpoint","ajax","success","data","title","rendered","content","scrollTop","link","fail","xhr","textStatus","errorThrown","console","error","originalEvent","state","factory","lazySizes","module","exports","l","getElementsByClassName","lazysizes","lazySizesConfig","docElem","documentElement","Date","supportPicture","HTMLPictureElement","_addEventListener","_getAttribute","setTimeout","requestAnimationFrame","requestIdleCallback","regPicture","loadEvents","regClassCache","forEach","Array","prototype","ele","cls","RegExp","test","setAttribute","trim","reg","addRemoveLoadEvents","dom","fn","add","action","evt","triggerEvent","elem","name","detail","noBubbles","noCancelable","createEvent","instance","initCustomEvent","dispatchEvent","updatePolyfill","el","full","polyfill","picturefill","pf","reevaluate","elements","src","getCSS","style","getComputedStyle","getWidth","offsetWidth","minSize","_lazysizesWidth","parentNode","rAF","running","waiting","firstFns","secondFns","fns","run","runFns","length","shift","rafBatch","queue","apply","arguments","push","hidden","_lsFlush","rAFIt","simple","that","args","throttle","lastTime","gDelay","rICTimeout","ricTimeout","now","idleCallback","timeout","isPriority","delay","debounce","func","timestamp","wait","later","last","prop","lazySizesDefaults","lazyClass","loadedClass","loadingClass","preloadClass","errorClass","autosizesClass","srcAttr","srcsetAttr","sizesAttr","customMedia","expFactor","hFac","loadMode","loadHidden","lazysizesConfig","loader","preloadElems","isCompleted","resetPreloadingTimer","started","eLvW","elvH","eLtop","eLleft","eLright","eLbottom","defaultExpand","preloadExpand","regImg","regIframe","supportScroll","navigator","userAgent","shrinkExpand","currentExpand","isLoading","lowRuns","resetPreloading","isNestedVisible","elemExpand","outerRect","visible","body","offsetParent","getBoundingClientRect","right","bottom","checkElements","eLlen","i","rect","autoLoadElem","loadedSomething","elemNegativeExpand","elemExpandVal","beforeExpandVal","lazyloadElems","expand","clientHeight","clientWidth","_lazyRace","unveilElement","innerWidth","innerHeight","preloadAfterLoad","throttledCheckElements","switchLoadingClass","rafSwitchLoadingClass","rafedSwitchLoadingClass","changeIframeSrc","contentWindow","handleSources","source","sourceSrcset","lazyUnveil","isAuto","sizes","isImg","srcset","isPicture","firesLoad","defaultPrevented","nodeName","clearTimeout","call","getElementsByTagName","complete","naturalWidth","autoSizer","updateElem","onload","afterScroll","_","MutationObserver","observe","childList","subtree","attributes","setInterval","readyState","checkElems","unveil","autosizesElems","sizeElement","sources","len","dataAttr","getSizeElement","updateElementsSizes","debouncedUpdateElementsSizes","cfg","uP","aC","rC","hC","fire","gW","webpackPolyfill","deprecate","paths","children","Object","defineProperty","enumerable","get","Scratch","windowWidth","windowHeight","mousedown_handler","mousemove_handler","mouseup_handler","handleShake","$brush","setBrushSize","setupCanvases","images","undefined","loadImages","array","currentIndex","temporaryValue","randomIndex","Math","floor","random","ev","ox","oy","first","offsetLeft","offsetTop","changedTouches","mainctx","mainCanvas","getContext","canvas","tempctx","temp","drawctxNext","draw","globalCompositeOperation","drawImage","img","widthRatio","heightRatio","ratio","min","centerX","centerY","x","y","fresh","drawctx","strokectx","strokeCanvas","lineWidth","brushSize","lineCap","lineJoin","strokeStyle","beginPath","moveTo","lineTo","stroke","getElementById","createElement","recompositeCanvases","mouseDown","local","getLocalCoords","scratchLine","loadCount","loadTotal","shuffle","imageLoaded","bindShake","loadingComplete","image","size","getBestImageSize","bestSize","keys","viewportMax","viewportMin","brushMax","brushMin","viewportWidth","shakeEvent","handler","start","global","define","Shake","options","Error","hasDeviceMotion","threshold","hasOwnProperty","lastX","lastY","lastZ","reset","stop","removeEventListener","devicemotion","current","accelerationIncludingGravity","currentTime","timeDifference","deltaX","deltaY","deltaZ","z","abs","getTime","handleEvent","type"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0f6103dc464c39e89e64","/* jshint esversion: 6, browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, WP */\n\n// Import dependencies\nimport lazySizes from 'lazysizes';\n\nimport Scratch from './Scratch';\n\n// Import style\nimport '../styl/site.styl';\n\nclass Site {\n  constructor() {\n    this.mobileThreshold = 601;\n\n    this.$body = $('body');\n    this.$cursorBrush = $('#cursor-brush');\n    this.$cursorLoading = $('#cursor-loading');\n\n    this.updateCursorPosition = this.updateCursorPosition.bind(this);\n\n    $(window).resize(this.onResize.bind(this));\n\n    $(document).ready(this.onReady.bind(this));\n\n  }\n\n  onResize() {\n\n  }\n\n  onReady() {\n    lazySizes.init();\n    this.bindMouseMove();\n    this.currentId = WP.currentId;\n    $('header#header').removeClass('u-hidden');\n    history.replaceState({ postId: this.currentId }, null, window.location.href);\n    this.bindMenuTriggers();\n    this.bindProjectTriggers();\n    this.bindBackButton();\n  }\n\n  fixWidows() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  }\n\n  bindMouseMove() {\n    window.addEventListener('mousemove', this.updateCursorPosition, false);\n\n    $('.hide-brush').hover(\n      function() {\n        $('.cursor').addClass('hide');\n      },\n      function() {\n        $('.cursor').removeClass('hide');\n      }\n    );\n  }\n\n  updateCursorPosition(e) {\n    const $cursor = this.$body.hasClass('loading') ? this.$cursorLoading : this.$cursorBrush;\n    const width = $cursor.width();\n    const height = $cursor.height();\n    const left = e.pageX - (width / 2);\n    const top = e.pageY - (height / 2);\n\n    $cursor.css({\n      'left': left + 'px',\n      'top': top + 'px'\n    });\n  }\n\n  bindMenuTriggers() {\n    $('.js-menu-trigger').on('click', (event) => {\n      $('body').addClass('nav-open').removeClass('project-open');\n      if ($(event.target).parent('.js-menu-trigger').hasClass('mobile-trigger')) {\n        this.pushHomeState();\n      }\n    });\n    $('.js-menu-close').on('click', () => {\n      if ($('body').hasClass('project-open')) {\n        this.closeProject();\n      } else {\n        $('body').removeClass('nav-open');\n      }\n    });\n  }\n\n  pushHomeState() {\n    history.pushState({ postId: WP.homeId },null,WP.siteUrl);\n    this.currentId = WP.homeId;\n  }\n\n  closeProject() {\n    $('body').removeClass('project-open');\n    this.pushHomeState();\n  }\n\n  bindProjectTriggers() {\n    $('#project-menu .menu-item a').on('click', (event) => {\n        event.preventDefault();\n\n        const postId = $(event.target).attr('data-postid');\n\n        if (postId !== this.currentId) {\n          this.loadProjectContent(postId);\n        }\n    });\n  }\n\n  loadProjectContent(postId) {\n    const url = WP.restEndpoint + 'project?include[]=' + postId;\n\n    $('body').addClass('loading');\n\n    $.ajax({\n      url,\n      success: (data) => {\n        $('body').removeClass('loading');\n\n        $('#project-title').html(data[0].title.rendered);\n        $('#project-content').html(data[0].content.rendered);\n\n        $('#project-holder').scrollTop(0);\n\n        history.pushState({ postId: postId },null,data[0].link);\n\n        $('body').addClass('project-open').removeClass('nav-open');\n\n        this.currentId = postId;\n\n      },\n      fail: (xhr, textStatus, errorThrown) => {\n        $('body').removeClass('loading');\n\n        console.error(errorThrown);\n      }\n    });\n  }\n\n  bindBackButton() {\n    $(window).bind('popstate', (event) => {\n      // if the event has our history data on it, load the page fragment with AJAX\n      const { postId } = event.originalEvent.state;\n      if (postId !== WP.homeId) {\n        this.loadProjectContent(postId);\n      } else {\n        this.closeProject();\n      }\n    });\n  }\n\n}\n\nnew Site();\nnew Scratch();\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","(function(window, factory) {\n\tvar lazySizes = factory(window, window.document);\n\twindow.lazySizes = lazySizes;\n\tif(typeof module == 'object' && module.exports){\n\t\tmodule.exports = lazySizes;\n\t}\n}(window, function l(window, document) {\n\t'use strict';\n\t/*jshint eqnull:true */\n\tif(!document.getElementsByClassName){return;}\n\n\tvar lazysizes, lazySizesConfig;\n\n\tvar docElem = document.documentElement;\n\n\tvar Date = window.Date;\n\n\tvar supportPicture = window.HTMLPictureElement;\n\n\tvar _addEventListener = 'addEventListener';\n\n\tvar _getAttribute = 'getAttribute';\n\n\tvar addEventListener = window[_addEventListener];\n\n\tvar setTimeout = window.setTimeout;\n\n\tvar requestAnimationFrame = window.requestAnimationFrame || setTimeout;\n\n\tvar requestIdleCallback = window.requestIdleCallback;\n\n\tvar regPicture = /^picture$/i;\n\n\tvar loadEvents = ['load', 'error', 'lazyincluded', '_lazyloaded'];\n\n\tvar regClassCache = {};\n\n\tvar forEach = Array.prototype.forEach;\n\n\tvar hasClass = function(ele, cls) {\n\t\tif(!regClassCache[cls]){\n\t\t\tregClassCache[cls] = new RegExp('(\\\\s|^)'+cls+'(\\\\s|$)');\n\t\t}\n\t\treturn regClassCache[cls].test(ele[_getAttribute]('class') || '') && regClassCache[cls];\n\t};\n\n\tvar addClass = function(ele, cls) {\n\t\tif (!hasClass(ele, cls)){\n\t\t\tele.setAttribute('class', (ele[_getAttribute]('class') || '').trim() + ' ' + cls);\n\t\t}\n\t};\n\n\tvar removeClass = function(ele, cls) {\n\t\tvar reg;\n\t\tif ((reg = hasClass(ele,cls))) {\n\t\t\tele.setAttribute('class', (ele[_getAttribute]('class') || '').replace(reg, ' '));\n\t\t}\n\t};\n\n\tvar addRemoveLoadEvents = function(dom, fn, add){\n\t\tvar action = add ? _addEventListener : 'removeEventListener';\n\t\tif(add){\n\t\t\taddRemoveLoadEvents(dom, fn);\n\t\t}\n\t\tloadEvents.forEach(function(evt){\n\t\t\tdom[action](evt, fn);\n\t\t});\n\t};\n\n\tvar triggerEvent = function(elem, name, detail, noBubbles, noCancelable){\n\t\tvar event = document.createEvent('CustomEvent');\n\n\t\tif(!detail){\n\t\t\tdetail = {};\n\t\t}\n\n\t\tdetail.instance = lazysizes;\n\n\t\tevent.initCustomEvent(name, !noBubbles, !noCancelable, detail);\n\n\t\telem.dispatchEvent(event);\n\t\treturn event;\n\t};\n\n\tvar updatePolyfill = function (el, full){\n\t\tvar polyfill;\n\t\tif( !supportPicture && ( polyfill = (window.picturefill || lazySizesConfig.pf) ) ){\n\t\t\tpolyfill({reevaluate: true, elements: [el]});\n\t\t} else if(full && full.src){\n\t\t\tel.src = full.src;\n\t\t}\n\t};\n\n\tvar getCSS = function (elem, style){\n\t\treturn (getComputedStyle(elem, null) || {})[style];\n\t};\n\n\tvar getWidth = function(elem, parent, width){\n\t\twidth = width || elem.offsetWidth;\n\n\t\twhile(width < lazySizesConfig.minSize && parent && !elem._lazysizesWidth){\n\t\t\twidth =  parent.offsetWidth;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn width;\n\t};\n\n\tvar rAF = (function(){\n\t\tvar running, waiting;\n\t\tvar firstFns = [];\n\t\tvar secondFns = [];\n\t\tvar fns = firstFns;\n\n\t\tvar run = function(){\n\t\t\tvar runFns = fns;\n\n\t\t\tfns = firstFns.length ? secondFns : firstFns;\n\n\t\t\trunning = true;\n\t\t\twaiting = false;\n\n\t\t\twhile(runFns.length){\n\t\t\t\trunFns.shift()();\n\t\t\t}\n\n\t\t\trunning = false;\n\t\t};\n\n\t\tvar rafBatch = function(fn, queue){\n\t\t\tif(running && !queue){\n\t\t\t\tfn.apply(this, arguments);\n\t\t\t} else {\n\t\t\t\tfns.push(fn);\n\n\t\t\t\tif(!waiting){\n\t\t\t\t\twaiting = true;\n\t\t\t\t\t(document.hidden ? setTimeout : requestAnimationFrame)(run);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trafBatch._lsFlush = run;\n\n\t\treturn rafBatch;\n\t})();\n\n\tvar rAFIt = function(fn, simple){\n\t\treturn simple ?\n\t\t\tfunction() {\n\t\t\t\trAF(fn);\n\t\t\t} :\n\t\t\tfunction(){\n\t\t\t\tvar that = this;\n\t\t\t\tvar args = arguments;\n\t\t\t\trAF(function(){\n\t\t\t\t\tfn.apply(that, args);\n\t\t\t\t});\n\t\t\t}\n\t\t;\n\t};\n\n\tvar throttle = function(fn){\n\t\tvar running;\n\t\tvar lastTime = 0;\n\t\tvar gDelay = 125;\n\t\tvar rICTimeout = lazySizesConfig.ricTimeout;\n\t\tvar run = function(){\n\t\t\trunning = false;\n\t\t\tlastTime = Date.now();\n\t\t\tfn();\n\t\t};\n\t\tvar idleCallback = requestIdleCallback && lazySizesConfig.ricTimeout ?\n\t\t\tfunction(){\n\t\t\t\trequestIdleCallback(run, {timeout: rICTimeout});\n\n\t\t\t\tif(rICTimeout !== lazySizesConfig.ricTimeout){\n\t\t\t\t\trICTimeout = lazySizesConfig.ricTimeout;\n\t\t\t\t}\n\t\t\t} :\n\t\t\trAFIt(function(){\n\t\t\t\tsetTimeout(run);\n\t\t\t}, true)\n\t\t;\n\n\t\treturn function(isPriority){\n\t\t\tvar delay;\n\n\t\t\tif((isPriority = isPriority === true)){\n\t\t\t\trICTimeout = 33;\n\t\t\t}\n\n\t\t\tif(running){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trunning =  true;\n\n\t\t\tdelay = gDelay - (Date.now() - lastTime);\n\n\t\t\tif(delay < 0){\n\t\t\t\tdelay = 0;\n\t\t\t}\n\n\t\t\tif(isPriority || (delay < 9 && requestIdleCallback)){\n\t\t\t\tidleCallback();\n\t\t\t} else {\n\t\t\t\tsetTimeout(idleCallback, delay);\n\t\t\t}\n\t\t};\n\t};\n\n\t//based on http://modernjavascript.blogspot.de/2013/08/building-better-debounce.html\n\tvar debounce = function(func) {\n\t\tvar timeout, timestamp;\n\t\tvar wait = 99;\n\t\tvar run = function(){\n\t\t\ttimeout = null;\n\t\t\tfunc();\n\t\t};\n\t\tvar later = function() {\n\t\t\tvar last = Date.now() - timestamp;\n\n\t\t\tif (last < wait) {\n\t\t\t\tsetTimeout(later, wait - last);\n\t\t\t} else {\n\t\t\t\t(requestIdleCallback || run)(run);\n\t\t\t}\n\t\t};\n\n\t\treturn function() {\n\t\t\ttimestamp = Date.now();\n\n\t\t\tif (!timeout) {\n\t\t\t\ttimeout = setTimeout(later, wait);\n\t\t\t}\n\t\t};\n\t};\n\n\t(function(){\n\t\tvar prop;\n\n\t\tvar lazySizesDefaults = {\n\t\t\tlazyClass: 'lazyload',\n\t\t\tloadedClass: 'lazyloaded',\n\t\t\tloadingClass: 'lazyloading',\n\t\t\tpreloadClass: 'lazypreload',\n\t\t\terrorClass: 'lazyerror',\n\t\t\t//strictClass: 'lazystrict',\n\t\t\tautosizesClass: 'lazyautosizes',\n\t\t\tsrcAttr: 'data-src',\n\t\t\tsrcsetAttr: 'data-srcset',\n\t\t\tsizesAttr: 'data-sizes',\n\t\t\t//preloadAfterLoad: false,\n\t\t\tminSize: 40,\n\t\t\tcustomMedia: {},\n\t\t\tinit: true,\n\t\t\texpFactor: 1.5,\n\t\t\thFac: 0.8,\n\t\t\tloadMode: 2,\n\t\t\tloadHidden: true,\n\t\t\tricTimeout: 300,\n\t\t};\n\n\t\tlazySizesConfig = window.lazySizesConfig || window.lazysizesConfig || {};\n\n\t\tfor(prop in lazySizesDefaults){\n\t\t\tif(!(prop in lazySizesConfig)){\n\t\t\t\tlazySizesConfig[prop] = lazySizesDefaults[prop];\n\t\t\t}\n\t\t}\n\n\t\twindow.lazySizesConfig = lazySizesConfig;\n\n\t\tsetTimeout(function(){\n\t\t\tif(lazySizesConfig.init){\n\t\t\t\tinit();\n\t\t\t}\n\t\t});\n\t})();\n\n\tvar loader = (function(){\n\t\tvar preloadElems, isCompleted, resetPreloadingTimer, loadMode, started;\n\n\t\tvar eLvW, elvH, eLtop, eLleft, eLright, eLbottom;\n\n\t\tvar defaultExpand, preloadExpand, hFac;\n\n\t\tvar regImg = /^img$/i;\n\t\tvar regIframe = /^iframe$/i;\n\n\t\tvar supportScroll = ('onscroll' in window) && !(/glebot/.test(navigator.userAgent));\n\n\t\tvar shrinkExpand = 0;\n\t\tvar currentExpand = 0;\n\n\t\tvar isLoading = 0;\n\t\tvar lowRuns = -1;\n\n\t\tvar resetPreloading = function(e){\n\t\t\tisLoading--;\n\t\t\tif(e && e.target){\n\t\t\t\taddRemoveLoadEvents(e.target, resetPreloading);\n\t\t\t}\n\n\t\t\tif(!e || isLoading < 0 || !e.target){\n\t\t\t\tisLoading = 0;\n\t\t\t}\n\t\t};\n\n\t\tvar isNestedVisible = function(elem, elemExpand){\n\t\t\tvar outerRect;\n\t\t\tvar parent = elem;\n\t\t\tvar visible = getCSS(document.body, 'visibility') == 'hidden' || getCSS(elem, 'visibility') != 'hidden';\n\n\t\t\teLtop -= elemExpand;\n\t\t\teLbottom += elemExpand;\n\t\t\teLleft -= elemExpand;\n\t\t\teLright += elemExpand;\n\n\t\t\twhile(visible && (parent = parent.offsetParent) && parent != document.body && parent != docElem){\n\t\t\t\tvisible = ((getCSS(parent, 'opacity') || 1) > 0);\n\n\t\t\t\tif(visible && getCSS(parent, 'overflow') != 'visible'){\n\t\t\t\t\touterRect = parent.getBoundingClientRect();\n\t\t\t\t\tvisible = eLright > outerRect.left &&\n\t\t\t\t\t\teLleft < outerRect.right &&\n\t\t\t\t\t\teLbottom > outerRect.top - 1 &&\n\t\t\t\t\t\teLtop < outerRect.bottom + 1\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn visible;\n\t\t};\n\n\t\tvar checkElements = function() {\n\t\t\tvar eLlen, i, rect, autoLoadElem, loadedSomething, elemExpand, elemNegativeExpand, elemExpandVal, beforeExpandVal;\n\n\t\t\tvar lazyloadElems = lazysizes.elements;\n\n\t\t\tif((loadMode = lazySizesConfig.loadMode) && isLoading < 8 && (eLlen = lazyloadElems.length)){\n\n\t\t\t\ti = 0;\n\n\t\t\t\tlowRuns++;\n\n\t\t\t\tif(preloadExpand == null){\n\t\t\t\t\tif(!('expand' in lazySizesConfig)){\n\t\t\t\t\t\tlazySizesConfig.expand = docElem.clientHeight > 500 && docElem.clientWidth > 500 ? 500 : 370;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefaultExpand = lazySizesConfig.expand;\n\t\t\t\t\tpreloadExpand = defaultExpand * lazySizesConfig.expFactor;\n\t\t\t\t}\n\n\t\t\t\tif(currentExpand < preloadExpand && isLoading < 1 && lowRuns > 2 && loadMode > 2 && !document.hidden){\n\t\t\t\t\tcurrentExpand = preloadExpand;\n\t\t\t\t\tlowRuns = 0;\n\t\t\t\t} else if(loadMode > 1 && lowRuns > 1 && isLoading < 6){\n\t\t\t\t\tcurrentExpand = defaultExpand;\n\t\t\t\t} else {\n\t\t\t\t\tcurrentExpand = shrinkExpand;\n\t\t\t\t}\n\n\t\t\t\tfor(; i < eLlen; i++){\n\n\t\t\t\t\tif(!lazyloadElems[i] || lazyloadElems[i]._lazyRace){continue;}\n\n\t\t\t\t\tif(!supportScroll){unveilElement(lazyloadElems[i]);continue;}\n\n\t\t\t\t\tif(!(elemExpandVal = lazyloadElems[i][_getAttribute]('data-expand')) || !(elemExpand = elemExpandVal * 1)){\n\t\t\t\t\t\telemExpand = currentExpand;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(beforeExpandVal !== elemExpand){\n\t\t\t\t\t\teLvW = innerWidth + (elemExpand * hFac);\n\t\t\t\t\t\telvH = innerHeight + elemExpand;\n\t\t\t\t\t\telemNegativeExpand = elemExpand * -1;\n\t\t\t\t\t\tbeforeExpandVal = elemExpand;\n\t\t\t\t\t}\n\n\t\t\t\t\trect = lazyloadElems[i].getBoundingClientRect();\n\n\t\t\t\t\tif ((eLbottom = rect.bottom) >= elemNegativeExpand &&\n\t\t\t\t\t\t(eLtop = rect.top) <= elvH &&\n\t\t\t\t\t\t(eLright = rect.right) >= elemNegativeExpand * hFac &&\n\t\t\t\t\t\t(eLleft = rect.left) <= eLvW &&\n\t\t\t\t\t\t(eLbottom || eLright || eLleft || eLtop) &&\n\t\t\t\t\t\t(lazySizesConfig.loadHidden || getCSS(lazyloadElems[i], 'visibility') != 'hidden') &&\n\t\t\t\t\t\t((isCompleted && isLoading < 3 && !elemExpandVal && (loadMode < 3 || lowRuns < 4)) || isNestedVisible(lazyloadElems[i], elemExpand))){\n\t\t\t\t\t\tunveilElement(lazyloadElems[i]);\n\t\t\t\t\t\tloadedSomething = true;\n\t\t\t\t\t\tif(isLoading > 9){break;}\n\t\t\t\t\t} else if(!loadedSomething && isCompleted && !autoLoadElem &&\n\t\t\t\t\t\tisLoading < 4 && lowRuns < 4 && loadMode > 2 &&\n\t\t\t\t\t\t(preloadElems[0] || lazySizesConfig.preloadAfterLoad) &&\n\t\t\t\t\t\t(preloadElems[0] || (!elemExpandVal && ((eLbottom || eLright || eLleft || eLtop) || lazyloadElems[i][_getAttribute](lazySizesConfig.sizesAttr) != 'auto')))){\n\t\t\t\t\t\tautoLoadElem = preloadElems[0] || lazyloadElems[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(autoLoadElem && !loadedSomething){\n\t\t\t\t\tunveilElement(autoLoadElem);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar throttledCheckElements = throttle(checkElements);\n\n\t\tvar switchLoadingClass = function(e){\n\t\t\taddClass(e.target, lazySizesConfig.loadedClass);\n\t\t\tremoveClass(e.target, lazySizesConfig.loadingClass);\n\t\t\taddRemoveLoadEvents(e.target, rafSwitchLoadingClass);\n\t\t\ttriggerEvent(e.target, 'lazyloaded');\n\t\t};\n\t\tvar rafedSwitchLoadingClass = rAFIt(switchLoadingClass);\n\t\tvar rafSwitchLoadingClass = function(e){\n\t\t\trafedSwitchLoadingClass({target: e.target});\n\t\t};\n\n\t\tvar changeIframeSrc = function(elem, src){\n\t\t\ttry {\n\t\t\t\telem.contentWindow.location.replace(src);\n\t\t\t} catch(e){\n\t\t\t\telem.src = src;\n\t\t\t}\n\t\t};\n\n\t\tvar handleSources = function(source){\n\t\t\tvar customMedia;\n\n\t\t\tvar sourceSrcset = source[_getAttribute](lazySizesConfig.srcsetAttr);\n\n\t\t\tif( (customMedia = lazySizesConfig.customMedia[source[_getAttribute]('data-media') || source[_getAttribute]('media')]) ){\n\t\t\t\tsource.setAttribute('media', customMedia);\n\t\t\t}\n\n\t\t\tif(sourceSrcset){\n\t\t\t\tsource.setAttribute('srcset', sourceSrcset);\n\t\t\t}\n\t\t};\n\n\t\tvar lazyUnveil = rAFIt(function (elem, detail, isAuto, sizes, isImg){\n\t\t\tvar src, srcset, parent, isPicture, event, firesLoad;\n\n\t\t\tif(!(event = triggerEvent(elem, 'lazybeforeunveil', detail)).defaultPrevented){\n\n\t\t\t\tif(sizes){\n\t\t\t\t\tif(isAuto){\n\t\t\t\t\t\taddClass(elem, lazySizesConfig.autosizesClass);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem.setAttribute('sizes', sizes);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsrcset = elem[_getAttribute](lazySizesConfig.srcsetAttr);\n\t\t\t\tsrc = elem[_getAttribute](lazySizesConfig.srcAttr);\n\n\t\t\t\tif(isImg) {\n\t\t\t\t\tparent = elem.parentNode;\n\t\t\t\t\tisPicture = parent && regPicture.test(parent.nodeName || '');\n\t\t\t\t}\n\n\t\t\t\tfiresLoad = detail.firesLoad || (('src' in elem) && (srcset || src || isPicture));\n\n\t\t\t\tevent = {target: elem};\n\n\t\t\t\tif(firesLoad){\n\t\t\t\t\taddRemoveLoadEvents(elem, resetPreloading, true);\n\t\t\t\t\tclearTimeout(resetPreloadingTimer);\n\t\t\t\t\tresetPreloadingTimer = setTimeout(resetPreloading, 2500);\n\n\t\t\t\t\taddClass(elem, lazySizesConfig.loadingClass);\n\t\t\t\t\taddRemoveLoadEvents(elem, rafSwitchLoadingClass, true);\n\t\t\t\t}\n\n\t\t\t\tif(isPicture){\n\t\t\t\t\tforEach.call(parent.getElementsByTagName('source'), handleSources);\n\t\t\t\t}\n\n\t\t\t\tif(srcset){\n\t\t\t\t\telem.setAttribute('srcset', srcset);\n\t\t\t\t} else if(src && !isPicture){\n\t\t\t\t\tif(regIframe.test(elem.nodeName)){\n\t\t\t\t\t\tchangeIframeSrc(elem, src);\n\t\t\t\t\t} else {\n\t\t\t\t\t\telem.src = src;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(isImg && (srcset || isPicture)){\n\t\t\t\t\tupdatePolyfill(elem, {src: src});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(elem._lazyRace){\n\t\t\t\tdelete elem._lazyRace;\n\t\t\t}\n\t\t\tremoveClass(elem, lazySizesConfig.lazyClass);\n\n\t\t\trAF(function(){\n\t\t\t\tif( !firesLoad || (elem.complete && elem.naturalWidth > 1)){\n\t\t\t\t\tif(firesLoad){\n\t\t\t\t\t\tresetPreloading(event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisLoading--;\n\t\t\t\t\t}\n\t\t\t\t\tswitchLoadingClass(event);\n\t\t\t\t}\n\t\t\t}, true);\n\t\t});\n\n\t\tvar unveilElement = function (elem){\n\t\t\tvar detail;\n\n\t\t\tvar isImg = regImg.test(elem.nodeName);\n\n\t\t\t//allow using sizes=\"auto\", but don't use. it's invalid. Use data-sizes=\"auto\" or a valid value for sizes instead (i.e.: sizes=\"80vw\")\n\t\t\tvar sizes = isImg && (elem[_getAttribute](lazySizesConfig.sizesAttr) || elem[_getAttribute]('sizes'));\n\t\t\tvar isAuto = sizes == 'auto';\n\n\t\t\tif( (isAuto || !isCompleted) && isImg && (elem[_getAttribute]('src') || elem.srcset) && !elem.complete && !hasClass(elem, lazySizesConfig.errorClass) && hasClass(elem, lazySizesConfig.lazyClass)){return;}\n\n\t\t\tdetail = triggerEvent(elem, 'lazyunveilread').detail;\n\n\t\t\tif(isAuto){\n\t\t\t\t autoSizer.updateElem(elem, true, elem.offsetWidth);\n\t\t\t}\n\n\t\t\telem._lazyRace = true;\n\t\t\tisLoading++;\n\n\t\t\tlazyUnveil(elem, detail, isAuto, sizes, isImg);\n\t\t};\n\n\t\tvar onload = function(){\n\t\t\tif(isCompleted){return;}\n\t\t\tif(Date.now() - started < 999){\n\t\t\t\tsetTimeout(onload, 999);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar afterScroll = debounce(function(){\n\t\t\t\tlazySizesConfig.loadMode = 3;\n\t\t\t\tthrottledCheckElements();\n\t\t\t});\n\n\t\t\tisCompleted = true;\n\n\t\t\tlazySizesConfig.loadMode = 3;\n\n\t\t\tthrottledCheckElements();\n\n\t\t\taddEventListener('scroll', function(){\n\t\t\t\tif(lazySizesConfig.loadMode == 3){\n\t\t\t\t\tlazySizesConfig.loadMode = 2;\n\t\t\t\t}\n\t\t\t\tafterScroll();\n\t\t\t}, true);\n\t\t};\n\n\t\treturn {\n\t\t\t_: function(){\n\t\t\t\tstarted = Date.now();\n\n\t\t\t\tlazysizes.elements = document.getElementsByClassName(lazySizesConfig.lazyClass);\n\t\t\t\tpreloadElems = document.getElementsByClassName(lazySizesConfig.lazyClass + ' ' + lazySizesConfig.preloadClass);\n\t\t\t\thFac = lazySizesConfig.hFac;\n\n\t\t\t\taddEventListener('scroll', throttledCheckElements, true);\n\n\t\t\t\taddEventListener('resize', throttledCheckElements, true);\n\n\t\t\t\tif(window.MutationObserver){\n\t\t\t\t\tnew MutationObserver( throttledCheckElements ).observe( docElem, {childList: true, subtree: true, attributes: true} );\n\t\t\t\t} else {\n\t\t\t\t\tdocElem[_addEventListener]('DOMNodeInserted', throttledCheckElements, true);\n\t\t\t\t\tdocElem[_addEventListener]('DOMAttrModified', throttledCheckElements, true);\n\t\t\t\t\tsetInterval(throttledCheckElements, 999);\n\t\t\t\t}\n\n\t\t\t\taddEventListener('hashchange', throttledCheckElements, true);\n\n\t\t\t\t//, 'fullscreenchange'\n\t\t\t\t['focus', 'mouseover', 'click', 'load', 'transitionend', 'animationend', 'webkitAnimationEnd'].forEach(function(name){\n\t\t\t\t\tdocument[_addEventListener](name, throttledCheckElements, true);\n\t\t\t\t});\n\n\t\t\t\tif((/d$|^c/.test(document.readyState))){\n\t\t\t\t\tonload();\n\t\t\t\t} else {\n\t\t\t\t\taddEventListener('load', onload);\n\t\t\t\t\tdocument[_addEventListener]('DOMContentLoaded', throttledCheckElements);\n\t\t\t\t\tsetTimeout(onload, 20000);\n\t\t\t\t}\n\n\t\t\t\tif(lazysizes.elements.length){\n\t\t\t\t\tcheckElements();\n\t\t\t\t\trAF._lsFlush();\n\t\t\t\t} else {\n\t\t\t\t\tthrottledCheckElements();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcheckElems: throttledCheckElements,\n\t\t\tunveil: unveilElement\n\t\t};\n\t})();\n\n\n\tvar autoSizer = (function(){\n\t\tvar autosizesElems;\n\n\t\tvar sizeElement = rAFIt(function(elem, parent, event, width){\n\t\t\tvar sources, i, len;\n\t\t\telem._lazysizesWidth = width;\n\t\t\twidth += 'px';\n\n\t\t\telem.setAttribute('sizes', width);\n\n\t\t\tif(regPicture.test(parent.nodeName || '')){\n\t\t\t\tsources = parent.getElementsByTagName('source');\n\t\t\t\tfor(i = 0, len = sources.length; i < len; i++){\n\t\t\t\t\tsources[i].setAttribute('sizes', width);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!event.detail.dataAttr){\n\t\t\t\tupdatePolyfill(elem, event.detail);\n\t\t\t}\n\t\t});\n\t\tvar getSizeElement = function (elem, dataAttr, width){\n\t\t\tvar event;\n\t\t\tvar parent = elem.parentNode;\n\n\t\t\tif(parent){\n\t\t\t\twidth = getWidth(elem, parent, width);\n\t\t\t\tevent = triggerEvent(elem, 'lazybeforesizes', {width: width, dataAttr: !!dataAttr});\n\n\t\t\t\tif(!event.defaultPrevented){\n\t\t\t\t\twidth = event.detail.width;\n\n\t\t\t\t\tif(width && width !== elem._lazysizesWidth){\n\t\t\t\t\t\tsizeElement(elem, parent, event, width);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar updateElementsSizes = function(){\n\t\t\tvar i;\n\t\t\tvar len = autosizesElems.length;\n\t\t\tif(len){\n\t\t\t\ti = 0;\n\n\t\t\t\tfor(; i < len; i++){\n\t\t\t\t\tgetSizeElement(autosizesElems[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tvar debouncedUpdateElementsSizes = debounce(updateElementsSizes);\n\n\t\treturn {\n\t\t\t_: function(){\n\t\t\t\tautosizesElems = document.getElementsByClassName(lazySizesConfig.autosizesClass);\n\t\t\t\taddEventListener('resize', debouncedUpdateElementsSizes);\n\t\t\t},\n\t\t\tcheckElems: debouncedUpdateElementsSizes,\n\t\t\tupdateElem: getSizeElement\n\t\t};\n\t})();\n\n\tvar init = function(){\n\t\tif(!init.i){\n\t\t\tinit.i = true;\n\t\t\tautoSizer._();\n\t\t\tloader._();\n\t\t}\n\t};\n\n\tlazysizes = {\n\t\tcfg: lazySizesConfig,\n\t\tautoSizer: autoSizer,\n\t\tloader: loader,\n\t\tinit: init,\n\t\tuP: updatePolyfill,\n\t\taC: addClass,\n\t\trC: removeClass,\n\t\thC: hasClass,\n\t\tfire: triggerEvent,\n\t\tgW: getWidth,\n\t\trAF: rAF,\n\t};\n\n\treturn lazysizes;\n}\n));\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/lazysizes/lazysizes.js","module.exports = function(module) {\n\tif(!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif(!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","/* jshint esversion: 6, browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, document, WP */\n\n/**\n * A great deal of this code is thanks to a\n * public Codepen by Curt Husting.\n * Thanks Curt!!\n *\n * https://codepen.io/curthusting/pen/fkCzh\n * https://github.com/curthusting\n */\n\nimport Shake from '@zouloux/shake';\n\nclass Scratch {\n  constructor() {\n    this.mobileThreshold = 601;\n\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n\n    this.mousedown_handler = this.mousedown_handler.bind(this);\n    this.mousemove_handler = this.mousemove_handler.bind(this);\n    this.mouseup_handler = this.mouseup_handler.bind(this);\n    this.handleShake = this.handleShake.bind(this);\n\n    this.$brush = $('#cursor-brush');\n\n    $(window).resize(this.onResize.bind(this));\n\n    $(document).ready(this.onReady.bind(this));\n  }\n\n  onResize() {\n    this.windowWidth = $(window).width();\n    this.windowHeight = $(window).height();\n\n    this.setBrushSize();\n    this.setupCanvases();\n  }\n\n  onReady() {\n    if (WP.images !== undefined) {\n      this.images = WP.images;\n\n      // Init\n      this.setBrushSize();\n      this.loadImages();\n    }\n  }\n\n  /**\n   * Helper function to randomly shuffle array\n   *\n   * @param array array to shuffle\n   */\n  shuffle(array) {\n    let currentIndex = array.length, temporaryValue, randomIndex;\n\n    // While there remain elements to shuffle...\n    while (0 !== currentIndex) {\n\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n\n      // And swap it with the current element.\n      temporaryValue = array[currentIndex];\n      array[currentIndex] = array[randomIndex];\n      array[randomIndex] = temporaryValue;\n      }\n\n    return array;\n  }\n\n  /**\n   * Helper function to get the local coords of an event in an element,\n   * since offsetX/offsetY are apparently not entirely supported, but\n   * offsetLeft/offsetTop/pageX/pageY are!\n   *\n   * @param elem element in question\n   * @param ev the event\n   */\n  getLocalCoords(elem, ev) {\n    let ox = 0, oy = 0;\n    let first;\n    let pageX, pageY;\n\n    // Walk back up the tree to calculate the total page offset of the\n    // currentTarget element.  I can't tell you how happy this makes me.\n    // Really.\n    while (elem !== null) {\n      ox += elem.offsetLeft;\n      oy += elem.offsetTop;\n      elem = elem.offsetParent;\n    }\n\n    if ('changedTouches' in ev) {\n      first = ev.changedTouches[0];\n      pageX = first.pageX;\n      pageY = first.pageY;\n    } else {\n      pageX = ev.pageX;\n      pageY = ev.pageY;\n    }\n\n    return { 'x': pageX - ox, 'y': pageY - oy };\n  }\n\n  /**\n   * Recomposites the canvases onto the screen\n   */\n  recompositeCanvases() {\n    const mainctx = this.mainCanvas.getContext('2d');\n\n    for (let i = 0; i < this.canvas.length; i++) {\n      const tempctx = this.canvas[i].temp.getContext('2d');\n      const drawctxNext = this.canvas[i + 1] !== undefined ? this.canvas[i + 1].draw.getContext('2d') : null;\n\n      if (drawctxNext !== null) {\n        // Clear [i + 1].draw\n        this.canvas[i + 1].draw.width = this.canvas[i + 1].draw.width;\n\n        // Stamp [i].temp to [i + 1].draw\n        drawctxNext.globalCompositeOperation = 'source-over';\n        drawctxNext.drawImage(this.canvas[i].temp, 0, 0);\n      }\n\n      // Stamp [i].draw to [i].temp\n      tempctx.globalCompositeOperation = 'source-over';\n      tempctx.drawImage(this.canvas[i].draw, 0, 0);\n\n      if (drawctxNext !== null) {\n        // Stamp [i].draw to [i + 1].draw (destination-in)\n        drawctxNext.globalCompositeOperation = 'destination-in';\n        drawctxNext.drawImage(this.canvas[i].draw, 0, 0);\n      }\n\n      // The image\n      const img = this.images[i].img;\n\n      // Calculate ratio to scale image to canvas\n      let widthRatio, heightRatio, ratio = 1;\n\n      if (img.width > this.mainCanvas.width || img.height > this.mainCanvas.height) {\n        widthRatio = this.mainCanvas.width / img.width;\n        heightRatio = this.mainCanvas.height / img.height;\n        ratio  = Math.min(widthRatio, heightRatio);\n      }\n\n      // Calculate centered image position\n      const centerX = ( this.mainCanvas.width - img.width * ratio ) / 2;\n      const centerY = ( this.mainCanvas.height - img.height * ratio ) / 2;\n\n      // Stamp image[i] to [i].temp (source-atop)\n      tempctx.globalCompositeOperation = 'source-atop';\n      tempctx.drawImage(img, 0, 0, img.width, img.height, centerX, centerY, img.width * ratio, img.height * ratio);\n\n      // Stamp [i].temp to mainCanvas\n      mainctx.drawImage(this.canvas[i].temp, 0, 0);\n    }\n\n  }\n\n  /**\n   * Draw a scratch line\n   *\n   * @param can the canvas\n   * @param x,y the coordinates\n   * @param fresh start a new line if true\n   */\n  scratchLine(x, y, fresh) {\n    const drawctx = this.canvas[0].draw.getContext('2d');\n    const strokectx = this.strokeCanvas.getContext('2d');\n\n    drawctx.lineWidth = strokectx.lineWidth = this.brushSize;\n    drawctx.lineCap = drawctx.lineJoin = strokectx.lineCap = strokectx.lineJoin = 'round';\n\n    drawctx.strokeStyle = '#fff'; // can be any opaque color\n    strokectx.strokeStyle = '#000';\n\n    if (fresh) {\n      drawctx.beginPath();\n      strokectx.beginPath();\n\n      // this +0.01 hackishly causes Linux Chrome to draw a\n      // \"zero\"-length line (a single point), otherwise it doesn't\n      // draw when the mouse is clicked but not moved\n      // Plus 1 for the border\n\n      drawctx.moveTo(x+0.01+1, y);\n      strokectx.moveTo(x+0.01+1, y);\n    }\n\n    drawctx.lineTo(x+1, y);\n    strokectx.lineTo(x+1, y);\n\n    drawctx.stroke();\n    strokectx.stroke();\n  }\n\n  /**\n  * Set up the canvases\n  */\n  setupCanvases() {\n    this.mainCanvas = document.getElementById('main-canvas');\n    this.strokeCanvas = document.getElementById('stroke-canvas');\n\n    this.mainCanvas.width = this.windowWidth;\n    this.mainCanvas.height = this.windowHeight;\n\n    this.canvas = [];\n\n    for (let i = 0; i < this.images.length; i++) {\n      // Create temp and draw canvases for each image\n      this.canvas[i] = {\n        'temp': document.createElement('canvas'),\n        'draw': document.createElement('canvas')\n      };\n\n      // Set canvases to width and height of main canvas\n      this.canvas[i].temp.width = this.canvas[i].draw.width = this.strokeCanvas.width = this.mainCanvas.width;\n      this.canvas[i].temp.height = this.canvas[i].draw.height = this.strokeCanvas.height = this.mainCanvas.height;\n    }\n\n    // draw the stuff to start\n    this.recompositeCanvases();\n\n    this.mouseDown = false;\n\n    // Bind events\n    this.strokeCanvas.addEventListener('mousedown', this.mousedown_handler, false);\n    this.strokeCanvas.addEventListener('touchstart', this.mousedown_handler, false);\n\n    this.strokeCanvas.addEventListener('mousemove', this.mousemove_handler, false);\n    this.strokeCanvas.addEventListener('touchmove', this.mousemove_handler, false);\n\n    this.strokeCanvas.addEventListener('mouseup', this.mouseup_handler, false);\n    this.strokeCanvas.addEventListener('touchend', this.mouseup_handler, false);\n  }\n\n  /**\n   * On mouse down, draw a line starting fresh\n   */\n  mousedown_handler(e) {\n    const local = this.getLocalCoords(this.mainCanvas, e);\n    this.mouseDown = true;\n\n    this.scratchLine(local.x, local.y, true);\n\n    e.preventDefault();\n    return false;\n  }\n\n  /**\n   * On mouse move, if mouse down, draw a line\n   *\n   * We do this on the window to smoothly handle mousing outside\n   * the canvas\n   */\n  mousemove_handler(e) {\n    if (!this.mouseDown) { return true; }\n\n    const local = this.getLocalCoords(this.mainCanvas, e);\n\n    this.scratchLine(local.x, local.y, false);\n\n    e.preventDefault();\n    return false;\n  }\n\n  /**\n   * On mouseup.  (Listens on window to catch out-of-canvas events.)\n   */\n  mouseup_handler(e) {\n    if (this.mouseDown) {\n      this.mouseDown = false;\n\n      this.recompositeCanvases();\n\n      // clear canvas\n      this.strokeCanvas.width = this.strokeCanvas.width;\n      this.canvas[0].draw.width = this.canvas[0].draw.width;\n\n      e.preventDefault();\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n  * Set up the DOM when loading is complete\n  */\n  loadingComplete() {\n    // Show the canvas or something\n    $('body').removeClass('loading');\n  }\n\n  /**\n   * Handle loading of needed image resources\n   */\n  loadImages() {\n    let loadCount = 0;\n    let loadTotal = this.images.length;\n\n    if (WP.shuffle) {\n      this.images = this.shuffle(this.images);\n    }\n\n    const imageLoaded = (() => {\n      loadCount++;\n\n      if (loadCount >= loadTotal) {\n        // All images loaded!\n        this.setupCanvases();\n        this.bindShake();\n        this.loadingComplete();\n      }\n    }).bind(this);\n\n    for (let image of this.images) {\n      // Create img elements for each image\n      // and save it on the object\n      const size = this.getBestImageSize(image.src);\n      image.img = document.createElement('img'); // image is global\n      image.img.addEventListener('load', imageLoaded, false);\n      image.img.src = image.src[size][0];\n    }\n  }\n\n  /**\n   * Find best image size for viewport\n   */\n  getBestImageSize(sizes) {\n    let bestSize = false;\n\n    for (let size in sizes) {\n      if (sizes[size][1] >= this.windowWidth) {\n        bestSize = size;\n        break;\n      }\n    }\n\n    if (!bestSize) {\n      // Get last key in sizes object\n      bestSize = Object.keys(sizes)[Object.keys(sizes).length - 1];\n    }\n\n    return bestSize;\n  }\n\n  setBrushSize() {\n    const viewportMax = 1920;\n    const viewportMin = 320;\n    const brushMax = 100;\n    const brushMin = 40;\n\n    const viewportWidth = this.windowWidth > viewportMax ? viewportMax : this.windowWidth;\n    this.brushSize = (((viewportWidth - viewportMin) * (brushMax - brushMin)) / (viewportMax - viewportMin)) + brushMin;\n\n    this.$brush.css({\n      'width': this.brushSize + 'px',\n      'height': this.brushSize + 'px'\n    });\n  }\n\n  bindShake() {\n    const shakeEvent = new Shake({\n      handler: this.handleShake\n    });\n\n    shakeEvent.start();\n  }\n\n  handleShake() {\n    this.images = this.shuffle(this.images);\n    this.setupCanvases();\n  }\n\n}\n\nexport default Scratch;\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Scratch.js","/*\n * Author: Alex Gibson\n * https://github.com/alexgibson/shake.js\n *\n * Fork Author : Alexis Bouhet\n * https://github.com/zouloux/shake.js\n *\n * License: MIT license\n */\n\n(function(global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return factory(global, global.document);\n        });\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory(global, global.document);\n    } else {\n        global.Shake = factory(global, global.document);\n    }\n} (typeof window !== 'undefined' ? window : this, function (window, document) {\n\n    'use strict';\n\n    function Shake(options) {\n\n        if (options == null || !('handler' in options))\n            throw new Error(\"Shake.js // Options needs an handler property.\");\n\n        //feature detect\n        this.hasDeviceMotion = 'ondevicemotion' in window;\n\n        this.options = {\n            threshold: 15, //default velocity threshold for shake to register\n            timeout: 1000 //default interval between events\n        };\n\n        for (var i in options) {\n            if (options.hasOwnProperty(i)) {\n                this.options[i] = options[i];\n            }\n        }\n\n        //use date to prevent multiple shakes firing\n        this.lastTime = new Date();\n\n        //accelerometer values\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    }\n\n    //reset timer values\n    Shake.prototype.reset = function () {\n        this.lastTime = new Date();\n        this.lastX = null;\n        this.lastY = null;\n        this.lastZ = null;\n    };\n\n    //start listening for devicemotion\n    Shake.prototype.start = function () {\n        this.reset();\n        if (this.hasDeviceMotion) {\n            window.addEventListener('devicemotion', this, false);\n        }\n    };\n\n    //stop listening for devicemotion\n    Shake.prototype.stop = function () {\n        if (this.hasDeviceMotion) {\n            window.removeEventListener('devicemotion', this, false);\n        }\n        this.reset();\n    };\n\n    //calculates if shake did occur\n    Shake.prototype.devicemotion = function (e) {\n        var current = e.accelerationIncludingGravity;\n        var currentTime;\n        var timeDifference;\n        var deltaX = 0;\n        var deltaY = 0;\n        var deltaZ = 0;\n\n        if ((this.lastX === null) && (this.lastY === null) && (this.lastZ === null)) {\n            this.lastX = current.x;\n            this.lastY = current.y;\n            this.lastZ = current.z;\n            return;\n        }\n\n        deltaX = Math.abs(this.lastX - current.x);\n        deltaY = Math.abs(this.lastY - current.y);\n        deltaZ = Math.abs(this.lastZ - current.z);\n\n        if (((deltaX > this.options.threshold) && (deltaY > this.options.threshold)) || ((deltaX > this.options.threshold) && (deltaZ > this.options.threshold)) || ((deltaY > this.options.threshold) && (deltaZ > this.options.threshold))) {\n            //calculate time in milliseconds since last shake registered\n            currentTime = new Date();\n            timeDifference = currentTime.getTime() - this.lastTime.getTime();\n\n            if (timeDifference > this.options.timeout) {\n                this.options.handler();\n                this.lastTime = new Date();\n            }\n        }\n\n        this.lastX = current.x;\n        this.lastY = current.y;\n        this.lastZ = current.z;\n\n    };\n\n    //event handler\n    Shake.prototype.handleEvent = function (e) {\n        if (typeof (this[e.type]) === 'function') {\n            return this[e.type](e);\n        }\n    };\n\n    return Shake;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/@zouloux/shake/shake.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styl/site.styl\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}